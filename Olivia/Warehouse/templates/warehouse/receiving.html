{% extends "warehouse/home.html" %}
{% load static %}

{% block title %}Receiving - Warehouse{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'warehouse/css/warehouse.css' %}">
{% endblock %}

{% block warehouse_content %}
<div class="card warehouse-card mt-4">
    <div class="card-header warehouse-card-header">
        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2">
            <h5 class="mb-0 fw-bold">
                <i class="fas fa-truck-loading text-primary me-2"></i>
                Receiving
            </h5>
            <div class="search-box mx-3">
                <input placeholder="Search..." id="searchReceiving" class="form-control shadow-none" type="search">
            </div>

            <div class="btn-group btn-group-sm align-items-center">
                <button class="btn btn-sm btn-outline-success" id="addNewReceivingBtn" data-bs-toggle="modal"
                    data-bs-target="#receivingModal">
                    <i class="fas fa-plus-circle me-1"></i> Create
                </button>

                <button class="btn btn-sm btn-outline-primary" id="updateReceivingBtn">
                    <i class="fas fa-edit me-1"></i> Update
                </button>

                <button class="btn btn-sm btn-outline-danger" id="deleteSelectedBtn">
                    <i class="fas fa-trash me-1"></i> Delete
                </button>

                <button class="btn btn-sm btn-outline-info" id="importBtn" data-bs-toggle="modal"
                    data-bs-target="#importReceivingModal">
                    <i class="fas fa-upload me-1"></i> Import
                </button>

                <button class="btn btn-sm btn-outline-secondary" id="exportBtn">
                    <i class="fas fa-download me-1"></i> Export
                </button>
            </div>
        </div>
    </div>
    <div class="card-body warehouse-card-body">
        <div class="table-responsive">
            <table class="table table-sm align-middle table-hover mb-0 warehouse-table">
                <thead class="table-light text-muted">
                    <tr>
                        <th><input type="checkbox" id="selectAll"></th>
                        <th>Receive Date</th>
                        <th>PR No.</th>
                        <th>PO No.</th>
                        <th>PO Date</th>
                        <th>GRN No.</th>
                        <th>Invoice No.</th>
                        <th>Category</th>
                        <th>Item Code</th>
                        <th>Item Description</th>
                        <th style="display: none;">Model No.</th>
                        <th style="display: none;">Serial No.</th>
                        <th style="display: none;">Country of Origin</th>
                        <th>UOM</th>
                        <th style="display: none;">Quantity</th>
                        <th style="display: none;">Unit Price</th>
                        <th style="display: none;">SubTotal</th>
                        <th style="display: none;">VAT%</th>
                        <th style="display: none;">VAT Amount</th>
                        <th style="display: none;">Total</th>
                        <th>Supplier</th>
                        <th>Purchase</th>
                        <th>Department</th>
                        <th style="display: none;">Production Date</th>
                        <th style="display: none;">Expiry Date</th>
                        <th>Product Life</th>
                        <th>Product Status</th>
                    </tr>
                </thead>
                <tbody id="receivingTableBody">
                    <tr>
                        <td colspan="28" class="text-center text-muted">No receiving records found</td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- Pagination -->
        <div class="d-flex align-items-center justify-content-between flex-wrap gap-2 mt-3">
            <!-- Entries info -->
            <div class="d-flex align-items-center small text-muted">
                <span id="paginationInfo">Showing 0 to 0 of 0 entries</span>
            </div>
            
            <!-- Pagination buttons with arrows -->
            <div class="d-flex gap-2">
                <button class="btn btn-outline-secondary btn-sm" id="prevPageBtn">
                    <i class="bi bi-chevron-left"></i> Previous
                </button>
                <button class="btn btn-outline-secondary btn-sm" id="nextPageBtn">
                    Next <i class="bi bi-chevron-right"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Include Modals -->
{% include 'warehouse/includes/receiving_modal.html' %}
{% include 'warehouse/includes/delete_confirm_modal.html' %}
{% include 'warehouse/includes/select_all_confirm_modal.html' %}
{% include 'warehouse/includes/import_receiving_modal.html' %}
{% include 'warehouse/includes/message_modal.html' %}

{% endblock %}

{% block extra_js %}
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="{% static 'warehouse/js/receiving.js' %}?v={{ timestamp|default:'1' }}"></script>
{% endblock %}
